<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Tài liệu bài học</title>
  <link rel="stylesheet" href="/app/app.css"/>
  <script type="module">
    import { mountNav, mountAdminMenu, mountAdminUser, api, token } from '/app/app-common.js';

    const state = {
      courses: [],
      lessons: [],
      resources: [],
      filterCourse: '',
      filterLesson: '',
      filterStatus: '',
      loading: false,
      lessonsLoading: false,
      message: '',
      form: {
        title: '',
        description: '',
        type: 'file',
        visibility: 'enrolled',
        url: '',
        storagePath: '',
        fileInfo: null,
        externalUrl: '',
        uploading: false,
      },
    };

    function setState(patch) {
      Object.assign(state, patch);
      render();
    }

    function setForm(patch) {
      state.form = { ...state.form, ...patch };
      renderForm();
    }

    function escapeHtml(value) {
      if (value === null || value === undefined) return '';
      return String(value)
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;');
    }

    function formatDate(value) {
      if (!value) return '';
      const date = new Date(value);
      if (Number.isNaN(date.getTime())) return '';
      return date.toLocaleString('vi-VN', { hour12: false });
    }

    function renderFilters() {
      const courseSelect = document.getElementById('filterCourse');
      if (courseSelect) {
        courseSelect.innerHTML = ['<option value="">Chọn khóa học</option>']
          .concat(
            state.courses.map(
              (c) => `<option value="${c.id}">${c.title || c.slug || 'Course #' + c.id}</option>`,
            ),
          )
          .join('');
        courseSelect.value = state.filterCourse || '';
      }
      const lessonSelect = document.getElementById('filterLesson');
      if (lessonSelect) {
        if (!state.lessons.length) {
          lessonSelect.innerHTML = '<option value="">Chưa có bài học</option>';
        } else {
          lessonSelect.innerHTML =
            '<option value="">Tất cả bài học</option>' +
            state.lessons
              .map((l) => `<option value="${l.id}">${l.title}</option>`)
              .join('');
        }
        lessonSelect.value = state.filterLesson || '';
      }
      const statusSelect = document.getElementById('filterStatus');
      if (statusSelect) {
        statusSelect.value = state.filterStatus || '';
      }
      const loadingIndicator = document.getElementById('lessonLoadingHint');
      if (loadingIndicator) {
        loadingIndicator.textContent = state.lessonsLoading ? '...Loading lessons' : '';
      }
    }

    function renderSummary() {
      const total = state.resources.length;
      const pending = state.resources.filter((r) => (r.status || '').toLowerCase() === 'pending').length;
      const approved = state.resources.filter((r) => (r.status || '').toLowerCase() === 'approved').length;
      const rejected = state.resources.filter((r) => (r.status || '').toLowerCase() === 'rejected').length;
      const hidden = state.resources.filter((r) => (r.status || '').toLowerCase() === 'hidden').length;
      const map = {
        summaryTotal: total,
        summaryPending: pending,
        summaryApproved: approved,
        summaryRejected: rejected,
        summaryHidden: hidden,
        summaryHeroPending: pending,
        summaryHeroApproved: approved,
      };
      Object.entries(map).forEach(([id, value]) => {
        const el = document.getElementById(id);
        if (el) el.textContent = value;
      });
    }

    function renderResources() {
      const host = document.getElementById('resourceList');
      if (!host) return;
      if (!state.filterCourse || !state.filterLesson) {
        host.innerHTML =
          '<div class="empty">Ch?n kh?a h?c v? b?i h?c ?? xem danh s?ch t?i li?u.</div>';
        return;
      }
      if (state.loading) {
        host.innerHTML = '<div class="empty">?ang t?i danh s?ch...</div>';
        return;
      }
      if (!state.resources.length) {
        host.innerHTML =
          '<div class="empty empty-card">Ch?a c? t?i li?u n?o ph? h?p b? l?c.</div>';
        return;
      }
      host.innerHTML = state.resources
        .map((res) => {
          const status = (res.status || 'pending').toLowerCase();
          const badge =
            status === 'approved'
              ? 'badge-success'
              : status === 'rejected'
              ? 'badge-danger'
              : status === 'hidden'
              ? 'badge-ghost'
              : 'badge-warning';
          const statusLabel =
            {
              approved: '?? duy?t',
              rejected: 'T? ch?i',
              hidden: '?? ?n',
              pending: '?ang ch?',
            }[status] || '?ang ch?';
          const visibility = (res.visibility || 'enrolled').toLowerCase();
          const visibilityLabel =
            {
              enrolled: 'H?c vi?n ?? ghi danh',
              public: 'C?ng khai',
              instructors: 'Ch? gi?ng vi?n',
            }[visibility] || visibility;
          const typeLabel = res.sourceType === 'link' ? 'Li?n k?t' : 'T?p tin';
          const owner = res.createdBy?.name || '---';
          const createdAt = formatDate(res.createdAt);
          return `
            <article class="card resource-card">
              <header class="resource-header">
                <div>
                  <p class="resource-title">${escapeHtml(res.title || 'T?i li?u')}</p>
                  <p class="muted tiny">${escapeHtml(res.description || '')}</p>
                  <div class="resource-meta">
                    <span>${typeLabel}</span>
                    <span>? Ph?m vi: ${visibilityLabel}</span>
                    <span>? ${res.downloadCount || 0} l??t t?i</span>
                  </div>
                  <div class="resource-meta">
                    <span>Ng??i t?o: ${escapeHtml(owner)}</span>
                    ${createdAt ? `<span>? T?i l?n ${createdAt}</span>` : ''}
                  </div>
                </div>
                <span class="badge ${badge}">${statusLabel}</span>
              </header>
              <footer class="resource-actions">
                <div class="action-buttons">
                  <button class="btn btn-xs ghost" data-action="open" data-id="${res.id}">Xem</button>
                  <button class="btn btn-xs" data-action="approve" data-id="${res.id}">Duy?t</button>
                  <button class="btn btn-xs danger" data-action="reject" data-id="${res.id}">T? ch?i</button>
                  <button class="btn btn-xs border-stone-300" data-action="hide" data-id="${res.id}">${
                    status === 'hidden' ? 'Hi?n th?' : '?n nhanh'
                  }</button>
                </div>
              </footer>
            </article>
          `;
        })
        .join('');
      host.querySelectorAll('button[data-action]').forEach((btn) => {
        btn.addEventListener('click', (ev) => {
          const id = ev.currentTarget.getAttribute('data-id');
          const action = ev.currentTarget.getAttribute('data-action');
          if (action === 'open') {
            openResource(id);
            return;
          }
          if (action === 'hide') {
            const targetStatus =
              state.resources.find((r) => String(r.id) === String(id))?.status === 'hidden' ? 'pending' : 'hidden';
            changeStatus(id, targetStatus);
            return;
          }
          const map = { approve: 'approved', reject: 'rejected' };
          changeStatus(id, map[action]);
        });
      });
    }
    function renderForm() {
      const formTitle = document.getElementById('formTitle');
      if (formTitle) formTitle.value = state.form.title || '';
      const formDescription = document.getElementById('formDescription');
      if (formDescription) formDescription.value = state.form.description || '';
      const formType = document.getElementById('formType');
      if (formType) formType.value = state.form.type || 'file';
      const formVisibility = document.getElementById('formVisibility');
      if (formVisibility) formVisibility.value = state.form.visibility || 'enrolled';
      const formLink = document.getElementById('formExternal');
      if (formLink) formLink.value = state.form.externalUrl || '';
      const uploadInfo = document.getElementById('uploadInfo');
      if (uploadInfo) {
        uploadInfo.textContent = state.form.fileInfo
          ? `Đã tải: ${state.form.fileInfo.name || 'file'}`
          : '';
      }
      document.getElementById('fileFields').style.display = state.form.type === 'file' ? 'block' : 'none';
      document.getElementById('linkFields').style.display = state.form.type === 'link' ? 'block' : 'none';
    }

    async function fetchCourses() {
      try {
        const list = await api('/api/teacher/courses?status=published');
        setState({ courses: Array.isArray(list) ? list : [] });
      } catch (err) {
        setState({ courses: [] });
        alert(err?.message || 'Không tải được danh sách khóa học');
      }
    }

    async function fetchLessons(courseId) {
      if (!courseId) {
        setState({ lessons: [], filterLesson: '' });
        return;
      }
      setState({ lessonsLoading: true, lessons: [], filterLesson: '' });
      try {
        const res = await fetch(`/api/public/courses/${courseId}/detail-sql`);
        const data = await res.json();
        const lessons =
          (data.modules || []).flatMap((mod) =>
            (mod.lessons || []).map((lesson) => ({
              id: lesson.id,
              title: `${mod.title || 'Module'} - ${lesson.title || 'Lesson'}`,
            })),
          ) || [];
        setState({ lessons, lessonsLoading: false });
      } catch {
        setState({ lessons: [], lessonsLoading: false });
        alert('Không tải được bài học.');
      }
    }

    async function fetchResources() {
      if (!state.filterCourse || !state.filterLesson) {
        setState({ resources: [], message: '' });
        renderResources();
        return;
      }
      setState({ loading: true, message: '' });
      try {
        const list = await api(
          `/api/teacher/lesson-resources/courses/${state.filterCourse}/lessons/${state.filterLesson}`,
        );
        let data = Array.isArray(list) ? list : [];
        if (state.filterStatus) {
          const filter = state.filterStatus.toLowerCase();
          data = data.filter((item) => (item.status || '').toLowerCase() === filter);
        }
        setState({ resources: data, loading: false });
      } catch (err) {
        setState({ resources: [], loading: false });
        alert(err?.message || 'Không tải được tài liệu');
      }
    }

    async function changeStatus(id, status) {
      if (!id || !status) return;
      try {
        await api(`/api/teacher/lesson-resources/${id}/status`, {
          method: 'PATCH',
          body: JSON.stringify({ status }),
        });
        fetchResources();
      } catch (err) {
        alert(err?.message || 'Không thể cập nhật trạng thái');
      }
    }

    async function openResource(id) {
      try {
        const res = await api(`/api/lesson-resources/${id}/download`);
        const url = res?.redirectUrl;
        if (url) {
          const absolute = url.startsWith('http') ? url : `${location.origin}${url}`;
          window.open(absolute, '_blank');
        } else {
          alert('Không tìm thấy đường dẫn tài liệu');
        }
      } catch (err) {
        alert(err?.message || 'Không thể mở tài liệu');
      }
    }

    async function handleUpload(file) {
      if (!file) return;
      if (!token()) {
        alert('Cần đăng nhập');
        return;
      }
      setForm({ uploading: true });
      const formData = new FormData();
      formData.append('file', file);
      try {
        const res = await fetch('/api/upload/file', {
          method: 'POST',
          headers: { Authorization: `Bearer ${token()}` },
          body: formData,
        });
        if (!res.ok) {
          throw new Error('Upload failed');
        }
        const data = await res.json();
        setForm({
          uploading: false,
          fileInfo: { name: file.name, size: file.size, contentType: file.type },
          storagePath: data.path,
          url: data.url,
        });
      } catch (err) {
        setForm({ uploading: false, fileInfo: null, storagePath: '', url: '' });
        alert(err?.message || 'Upload không thành công');
      }
    }

    async function submitResource() {
      if (!state.filterCourse || !state.filterLesson) {
        alert('Chọn khóa học và bài học trước khi tải lên.');
        return;
      }
      const title = state.form.title.trim();
      if (!title) {
        alert('Nhập tiêu đề tài liệu');
        return;
      }
      const body = {
        title,
        description: state.form.description,
        sourceType: state.form.type,
        visibility: state.form.visibility,
      };
      if (state.form.type === 'file') {
        if (!state.form.storagePath || !state.form.url) {
          alert('Hãy tải tập trước khi lưu.');
          return;
        }
        body.storagePath = state.form.storagePath;
        body.fileUrl = state.form.url;
        body.fileType = state.form.fileInfo?.contentType;
        body.fileSize = state.form.fileInfo?.size;
      } else {
        if (!state.form.externalUrl.trim()) {
          alert('Nhập đường dẫn liên kết');
          return;
        }
        body.externalUrl = state.form.externalUrl.trim();
      }
      try {
        await api(`/api/teacher/lesson-resources/courses/${state.filterCourse}/lessons/${state.filterLesson}`, {
          method: 'POST',
          body: JSON.stringify(body),
        });
        alert('Đã thêm tài liệu (đang chờ duyệt).');
        setForm({
          title: '',
          description: '',
          type: state.form.type,
          visibility: state.form.visibility,
          url: '',
          storagePath: '',
          fileInfo: null,
          externalUrl: '',
          uploading: false,
        });
        fetchResources();
      } catch (err) {
        alert(err?.message || 'Không thể thêm tài liệu');
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      mountNav('nav', 'compact');
      mountAdminMenu('adminMenu', 'teacher-resources');
      mountAdminUser('adminUserCard');
      document.getElementById('filterCourse').addEventListener('change', (e) => {
        setState({ filterCourse: e.target.value, filterLesson: '' });
        fetchLessons(e.target.value);
      });
      document.getElementById('filterLesson').addEventListener('change', (e) => {
        setState({ filterLesson: e.target.value });
      });
      document.getElementById('filterStatus').addEventListener('change', (e) => {
        setState({ filterStatus: e.target.value });
      });
      document.getElementById('btnApply').addEventListener('click', fetchResources);
      document.getElementById('btnRefresh').addEventListener('click', fetchResources);
      document.getElementById('formType').addEventListener('change', (e) => {
        setForm({ type: e.target.value });
      });
      document.getElementById('formVisibility').addEventListener('change', (e) => {
        setForm({ visibility: e.target.value });
      });
      document.getElementById('formTitle').addEventListener('input', (e) => setForm({ title: e.target.value }));
      document.getElementById('formDescription').addEventListener('input', (e) =>
        setForm({ description: e.target.value }),
      );
      document.getElementById('formExternal').addEventListener('input', (e) =>
        setForm({ externalUrl: e.target.value }),
      );
      document.getElementById('resourceFile').addEventListener('change', (e) => {
        const file = e.target.files?.[0];
        if (file) {
          handleUpload(file);
        }
      });
      document.getElementById('btnSubmitResource').addEventListener('click', submitResource);
      fetchCourses();
    });

    function render() {
      renderFilters();
      renderResources();
      renderSummary();
      renderForm();
    }
  </script>
  <style>
    .hero-card { position:relative; overflow:hidden; border-radius:28px; padding:32px; background:linear-gradient(135deg, rgba(94,96,255,0.12), rgba(64,18,136,0.55)); border:1px solid rgba(148,163,184,0.25); box-shadow:0 25px 60px rgba(8,11,22,0.55); display:grid; gap:24px; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); }
    .hero-card::after { content:''; position:absolute; inset:0; background:radial-gradient(circle at 15% 20%, rgba(255,255,255,0.08), transparent 45%); pointer-events:none; }
    .hero-card > * { position:relative; }
    .hero-eyebrow { text-transform:uppercase; font-size:0.75rem; letter-spacing:0.3em; color:#c7d2fe; margin-bottom:10px; display:block; }
    .hero-title { font-size: clamp(1.8rem, 3vw, 2.6rem); color:#fff; margin-bottom:12px; }
    .hero-text { color:#e0e7ff; max-width:50ch; }
    .hero-tags { display:flex; flex-wrap:wrap; gap:10px; margin-top:18px; }
    .hero-tags span { background:rgba(255,255,255,0.16); border:1px solid rgba(255,255,255,0.3); color:#f8fafc; padding:6px 12px; border-radius:999px; font-size:0.85rem; }
    .hero-side { background:rgba(15,23,42,0.45); border:1px solid rgba(148,163,184,0.2); border-radius:22px; padding:20px; color:#f8fafc; }
    .hero-checklist { list-style:none; padding:0; margin:12px 0 0; display:flex; flex-direction:column; gap:8px; }
    .hero-checklist li { font-size:0.9rem; color:#e2e8f0; padding-left:20px; position:relative; }
    .hero-checklist li::before { content:'•'; position:absolute; left:0; color:#a5b4fc; }
    .hero-progress { margin-top:18px; display:flex; gap:20px; align-items:flex-end; flex-wrap:wrap; }
    .hero-number { font-size:2.2rem; font-weight:600; color:#fff; display:block; }
    .hero-note { color:#c7d2fe; margin:4px 0 0; }

    .filters-card { position:relative; background: radial-gradient(circle at top left, rgba(99,102,241,0.2), rgba(15,23,42,0.95)); border: 1px solid rgba(148,163,184,0.25); box-shadow: 0 20px 50px rgba(10,12,25,0.45); border-radius: 24px; padding: 20px; overflow:hidden; }
    .filters-card::before { content:''; position:absolute; inset:0; background:radial-gradient(circle at 80% 20%, rgba(255,255,255,0.05), transparent 50%); pointer-events:none; }
    .filters-card .input { background:rgba(15,23,42,0.65); border:1px solid rgba(255,255,255,0.12); color:#f8fafc; }
    .filters-card .input option { color:#0f172a; }

    .summary-grid { display:grid; gap:16px; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); }
    .stat-card { border-radius:22px; padding:18px; background:rgba(15,23,42,0.85); border:1px solid rgba(148,163,184,0.2); color:#e2e8f0; box-shadow:0 20px 45px rgba(15,23,42,0.45); }
    .stat-value { font-size:1.8rem; font-weight:600; color:#fefefe; margin-top:4px; }

    .resource-layout { display:grid; gap:20px; }
    @media (min-width: 1024px) { .resource-layout { grid-template-columns: 1.5fr 1fr; } }

    .resource-card { border-radius: 18px; border: 1px solid rgba(148,163,184,0.25); padding: 20px; background: #fff; box-shadow: 0 15px 40px rgba(15,23,42,0.15); }
    .resource-header { display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap; }
    .resource-title { font-size:1.05rem; font-weight:600; color:#0f172a; }
    .resource-meta { font-size:0.8rem; color:#475569; display:flex; flex-wrap:wrap; gap:8px; margin-top:4px; }
    .resource-actions { margin-top:16px; }
    .action-buttons { display:flex; flex-wrap:wrap; gap:10px; }
    .empty { text-align:center; padding:32px; border-radius:18px; background:rgba(15,23,42,0.05); color:#475569; border:1px dashed rgba(148,163,184,0.45); }
    .empty-card { background:#fff; }

    .form-grid, .upload-card .form-grid { display:grid; gap:12px; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); }
    .upload-card textarea { min-height:120px; }
  </style>
</head>
<body class="admin-body">
  <div class="admin-shell">
    <aside class="admin-sidebar">
      <div class="admin-brand">
        <span class="eyebrow">Studio giảng viên</span>
        <strong>Tài liệu bài học</strong>
        <p class="muted">Quản lý, tải lên và duyệt tài liệu cho bài học.</p>
      </div>
      <div id="adminUserCard" class="admin-user-card"></div>
      <nav id="adminMenu" class="admin-menu"></nav>
      <div class="admin-sidebar-footer">
        <a class="text-link" href="/app/index.html">← Về trang tổng quan</a>
      </div>
    </aside>

    <div class="admin-main">
      <div id="nav" data-variant="compact"></div>
      <main class="admin-content">
        <section class="hero-card">
          <div class="hero-main">
            <p class="hero-eyebrow">Studio giảng viên · Theo dõi & phê duyệt</p>
            <h1 class="hero-title">Tài liệu khóa học</h1>
            <p class="hero-text">
              Duy trì trải nghiệm học tập liền mạch bằng cách rà soát tài liệu trước khi đến tay học viên,
              cập nhật mô tả rõ ràng và ưu tiên các định dạng dễ truy cập.
            </p>
            <div class="hero-tags">
              <span>Upload nhanh</span>
              <span>Phê duyệt minh bạch</span>
              <span>Bảo mật tài nguyên</span>
            </div>
          </div>
          <div class="hero-side">
            <p class="muted tiny">Gợi ý thao tác</p>
            <ul class="hero-checklist">
              <li>Chỉ tải lên tài liệu đã kiểm tra bản quyền.</li>
              <li>Ghi rõ nội dung & phạm vi sử dụng để xét duyệt nhanh.</li>
              <li>Đổi trạng thái khi muốn ẩn hoặc cập nhật tài liệu.</li>
            </ul>
            <div class="hero-progress">
              <div>
                <span class="hero-number" id="summaryHeroPending">0</span>
                <p class="hero-note">Đang chờ duyệt</p>
              </div>
              <div>
                <span class="hero-number" id="summaryHeroApproved">0</span>
                <p class="hero-note">Đã sẵn sàng</p>
              </div>
            </div>
          </div>
        </section>

        <section class="card filters-card">
          <div class="filters-header">
            <div>
              <p class="muted text-xs">Bộ lọc</p>
              <h2>Chọn khóa & bài học</h2>
            </div>
            <span id="lessonLoadingHint" class="muted tiny"></span>
          </div>
          <div class="grid md:grid-cols-4 gap-3 mt-3">
            <div>
              <label class="muted text-xs" for="filterCourse">Khóa học</label>
              <select id="filterCourse" class="input mt-1"></select>
            </div>
            <div>
              <label class="muted text-xs" for="filterLesson">Bài học</label>
              <select id="filterLesson" class="input mt-1"></select>
            </div>
            <div>
              <label class="muted text-xs" for="filterStatus">Trạng thái</label>
              <select id="filterStatus" class="input mt-1">
                <option value="">Tất cả</option>
                <option value="pending">Đang chờ</option>
                <option value="approved">Đã duyệt</option>
                <option value="rejected">Từ chối</option>
                <option value="hidden">Ẩn</option>
              </select>
            </div>
            <div class="flex items-end gap-2">
              <button id="btnApply" class="btn btn-primary flex-1">Lọc</button>
              <button id="btnRefresh" class="btn ghost flex-1">Tải lại</button>
            </div>
          </div>
        </section>

        <section class="grid summary-grid mt-4">
          <div class="stat-card">
            <div>
              <p class="muted tiny">Tổng</p>
              <p class="stat-value" id="summaryTotal">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div>
              <p class="muted tiny">Đang chờ</p>
              <p class="stat-value" id="summaryPending">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div>
              <p class="muted tiny">Đã duyệt</p>
              <p class="stat-value" id="summaryApproved">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div>
              <p class="muted tiny">Từ chối</p>
              <p class="stat-value" id="summaryRejected">0</p>
            </div>
          </div>
          <div class="stat-card">
            <div>
              <p class="muted tiny">Ẩn</p>
              <p class="stat-value" id="summaryHidden">0</p>
            </div>
          </div>
        </section>

        <div class="resource-layout mt-4">
        <section class="card">
          <div class="list-header">
            <div>
              <p class="muted tiny">Danh sách</p>
              <h3>Tài liệu bài học</h3>
            </div>
          </div>
          <div id="resourceList" class="mt-3"></div>
        </section>

        <section class="card upload-card">
          <div class="list-header">
            <div>
              <p class="muted tiny">Thêm mới</p>
              <h3>Tải lên tài liệu</h3>
            </div>
          </div>
          <div class="mt-4 form-grid">
            <div>
              <label class="muted text-xs">Tiêu đề</label>
              <input id="formTitle" class="input mt-1" placeholder="Tên tài liệu"/>
            </div>
            <div>
              <label class="muted text-xs" for="formType">Loại</label>
              <select id="formType" class="input mt-1">
                <option value="file">Tập tin</option>
                <option value="link">Liên kết</option>
              </select>
            </div>
            <div>
              <label class="muted text-xs" for="formVisibility">Phạm vi</label>
              <select id="formVisibility" class="input mt-1">
                <option value="enrolled">Học viên đã ghi danh</option>
                <option value="public">Công khai</option>
                <option value="instructors">Chỉ giảng viên</option>
              </select>
            </div>
          </div>
          <div class="mt-3">
            <label class="muted text-xs">Mô tả</label>
            <textarea id="formDescription" class="input mt-1" rows="3" placeholder="Mô tả ngắn..."></textarea>
          </div>
          <div id="fileFields" class="mt-3">
            <label class="muted text-xs" for="resourceFile">Chọn tập</label>
            <input id="resourceFile" type="file" class="input mt-1"/>
            <div id="uploadInfo" class="muted tiny mt-1"></div>
          </div>
          <div id="linkFields" class="mt-3" style="display:none">
            <label class="muted text-xs" for="formExternal">Đường dẫn liên kết</label>
            <input id="formExternal" class="input mt-1" placeholder="https://example.com/file.pdf"/>
          </div>
          <div class="mt-4 text-right">
            <button id="btnSubmitResource" class="btn btn-primary">Thêm tài liệu</button>
          </div>
        </section>
        </div>
      </main>
    </div>
  </div>
</body>
</html>
